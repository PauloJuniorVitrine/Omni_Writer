// üìÅ Arquivo: .cursor/rules/omni_rules.mdc.json
// üéØ Regras avan√ßadas derivadas do geral_rules_melhorado.yaml, adaptadas ao formato MDC
{
  "name": "Omni Project Execution Rules",
  "scope": "project",
  "triggers": [
    "onOpenProject",
    "onRun",
    "beforeGenerate",
    "beforeSave"
  ],
  "description": "Regras cr√≠ticas para execu√ß√£o automatizada e refinamento iterativo de projetos Omni com foco em completude, valida√ß√£o e versionamento seguro.",
  "rules": [
    {
      "id": "plan-before-execute",
      "description": "Gerar plano de execu√ß√£o detalhado antes de qualquer c√≥digo.",
      "trigger": "beforeGenerate",
      "severity": "critical",
      "action": "Gerar plano com objetivos, etapas, recursos, riscos e s√≥ prosseguir com aprova√ß√£o."
    },
    {
      "id": "auto-refine-cycle",
      "description": "Refinar automaticamente at√© atingir 100% de conformidade.",
      "trigger": "onFailure",
      "severity": "error",
      "action": "Executar at√© 5 ciclos iterativos seguros antes de fallback."
    },
    {
      "id": "validate-structure-and-directories",
      "description": "Confirmar se o prompt inclui estrutura de diret√≥rios e plano sequencial.",
      "trigger": "beforeGenerate",
      "severity": "critical",
      "action": "Bloquear gera√ß√£o se faltar se√ß√£o 'üóÇÔ∏è Estrutura de Diret√≥rios' no prompt."
    },
    {
      "id": "save-with-versioning",
      "description": "Salvar automaticamente com versionamento n√£o destrutivo.",
      "trigger": "beforeSave",
      "severity": "error",
      "action": "Salvar todos os artefatos com vers√£o incremental (v1, v2, etc)."
    },
    {
      "id": "full-orchestrated-execution",
      "description": "Executar o plano completo com rastreabilidade entre as etapas.",
      "trigger": "onRun",
      "severity": "critical",
      "action": "Executar plano aprovado do STEP-001 ao STEP-N sem interrup√ß√£o. Gerar logs por etapa."
    },
    {
      "id": "non-destructive-review",
      "description": "Toda melhoria deve preservar conte√∫do existente.",
      "trigger": "onReview",
      "severity": "error",
      "action": "Refatorar apenas se for comprovadamente seguro. Nada pode ser apagado sem justificativa."
    },
    {
      "id": "test-coverage-threshold",
      "description": "Validar cobertura m√≠nima de testes obrigat√≥rios.",
      "trigger": "afterTest",
      "severity": "error",
      "action": "Unit√°rios ‚â• 98%, Integra√ß√£o ‚â• 95%, E2E ‚â• 85%. Caso contr√°rio, bloquear entrega."
    },
    {
      "id": "generate-doc-and-changelog",
      "description": "Gerar documenta√ß√£o e changelog automaticamente.",
      "trigger": "afterGenerate",
      "severity": "warning",
      "action": "Criar docs/explanation.md e atualizar CHANGELOG.md."
    },
    {
      "id": "auto-rollback-regressions",
      "description": "Reverter automaticamente em caso de regress√£o por novos commits.",
      "trigger": "afterTest",
      "severity": "critical",
      "action": "Detectar regress√µes e restaurar vers√£o anterior."
    }
  ]
}
