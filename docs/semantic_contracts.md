# Contratos Semânticos — Omni Writer

| Caminho                                 | Assinatura                                              | Propósito                                      | Parâmetros/Retorno         | Similaridade Doc/Teste | Alerta de Desvio |
|-----------------------------------------|---------------------------------------------------------|------------------------------------------------|----------------------------|-----------------------|------------------|
| app/routes.py:index                     | def index()                                             | Página inicial da aplicação                     | - / Response               | OK                    | -               |
| app/routes.py:generate                  | def generate()                                          | Geração de artigo via POST                      | - / Response               | OK                    | -               |
| app/routes.py:download_zip              | def download_zip()                                      | Download de artigos em ZIP                      | - / Response               | OK                    | -               |
| app/routes.py:download_zip_multi        | def download_zip_multi()                                | Download múltiplo de artigos                    | - / Response               | OK                    | -               |
| app/routes.py:export_prompts            | def export_prompts()                                    | Exportação de prompts em CSV                    | - / Response               | OK                    | -               |
| app/routes.py:export_artigos_csv        | def export_artigos_csv()                                | Exportação de artigos em CSV                    | - / Response               | OK                    | -               |
| app/routes.py:status                    | def status(trace_id)                                    | Status de geração por trace_id                  | trace_id / JSON            | OK                    | -               |
| app/routes.py:sse_events                | def sse_events(trace_id)                                | Eventos SSE de progresso                        | trace_id / stream          | OK                    | -               |
| app/routes.py:event_stream              | def event_stream()                                      | Stream de eventos SSE                           | - / stream                 | OK                    | -               |
| app/blog_routes.py:api_list_blogs       | def api_list_blogs()                                    | Listar blogs                                    | - / JSON                   | OK                    | -               |
| app/blog_routes.py:api_create_blog      | def api_create_blog()                                   | Criar novo blog                                 | - / JSON                   | OK                    | -               |
| app/blog_routes.py:api_delete_blog      | def api_delete_blog(blog_id)                            | Excluir blog                                    | blog_id / JSON             | OK                    | -               |
| app/blog_routes.py:api_list_prompts     | def api_list_prompts(blog_id)                           | Listar prompts de blog                          | blog_id / JSON             | OK                    | -               |
| app/blog_routes.py:api_add_prompt       | def api_add_prompt(blog_id)                             | Adicionar prompt a blog                         | blog_id / JSON             | OK                    | -               |
| app/blog_routes.py:api_delete_prompt    | def api_delete_prompt(blog_id, prompt_id)               | Excluir prompt de blog                          | blog_id, prompt_id / JSON  | OK                    | -               |
| app/controller.py:generate_article      | def generate_article(config, prompt, trace_id=None, variation=0) | Orquestra geração de artigo             | config, prompt, trace_id, variation / ArticleOutput | OK                    | -               |
| app/celery_worker.py:gerar_artigos_task | def gerar_artigos_task(config_dict, trace_id=None)      | Task Celery para geração de artigos             | config_dict, trace_id / -  | OK                    | -               |
| app/celery_worker.py:gerar_artigos_multi_task | def gerar_artigos_multi_task(instances, prompts, trace_id=None) | Task Celery para geração múltipla | instances, prompts, trace_id / - | OK                    | -               |
| infraestructure/openai_gateway.py:generate_article_openai | def generate_article_openai(config, prompt, trace_id=None, variation=0) | Gateway OpenAI | config, prompt, trace_id, variation / ArticleOutput | OK | - |
| infraestructure/deepseek_gateway.py:generate_article_deepseek | def generate_article_deepseek(config, prompt, trace_id=None, variation=0) | Gateway DeepSeek | config, prompt, trace_id, variation / ArticleOutput | OK | - |
| infraestructure/storage.py:save_article | def save_article(article, output_dir=ARTIGOS_DIR, trace_id=None) | Salvar artigo em disco | article, output_dir, trace_id / - | OK | - |
| infraestructure/storage.py:make_zip     | def make_zip(articles_dir=ARTIGOS_DIR, zip_path=ARTIGOS_ZIP, trace_id=None) | Gerar ZIP de artigos | articles_dir, zip_path, trace_id / - | OK | - |
| infraestructure/storage.py:make_zip_multi | def make_zip_multi(instances, output_base=OUTPUT_BASE_DIR, zip_path=None, trace_id=None) | Gerar ZIP múltiplo | instances, output_base, zip_path, trace_id / - | OK | - |
| shared/logger.py:get_logger             | def get_logger(name: str) -> logging.Logger             | Obter logger estruturado                         | name / Logger              | OK                    | -               |
| shared/logger.py:export_metrics         | def export_metrics() -> str                             | Exportar métricas de logging                     | - / str                    | OK                    | -               |
| shared/status_repository.py:init_db     | def init_db()                                          | Inicializar DB de status                         | - / -                      | OK                    | -               |
| shared/status_repository.py:update_status| def update_status(trace_id, total, current, status)     | Atualizar status de geração                      | trace_id, total, current, status / - | OK | - |
| shared/status_repository.py:get_status  | def get_status(trace_id)                               | Obter status por trace_id                        | trace_id / status           | OK                    | -               |
| shared/status_repository.py:clear_old_status | def clear_old_status(days=7)                        | Limpar status antigos                            | days / -                   | OK                    | -               |
| shared/messages.py:get_message          | def get_message(key, lang='pt-BR', **kwargs)           | Obter mensagem multilíngue                       | key, lang, kwargs / str     | OK                    | -               | 